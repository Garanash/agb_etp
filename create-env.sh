#!/bin/bash

# Скрипт для создания .env файла на сервере
echo "🔧 Создание .env файла для продакшена..."

# Получаем IP адрес сервера
SERVER_IP=$(hostname -I | awk '{print $1}')

cat > .env << EOF
# 🏢 Алмазгеобур ЭТП - Production Environment Variables

# =============================================================================
# БАЗА ДАННЫХ
# =============================================================================
POSTGRES_USER=agb_etp
POSTGRES_PASSWORD=agb_secure_password_2024
POSTGRES_DB=agb_etp
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgresql://agb_etp:agb_secure_password_2024@postgres:5432/agb_etp

# =============================================================================
# БЕЗОПАСНОСТЬ
# =============================================================================
SECRET_KEY=agb_very_secure_secret_key_2024_change_in_production
DEBUG=False

# =============================================================================
# CORS
# =============================================================================
CORS_ORIGINS=["http://localhost", "http://$SERVER_IP", "https://$SERVER_IP"]

# =============================================================================
# ФАЙЛЫ
# =============================================================================
ALLOWED_FILE_TYPES=pdf,doc,docx,xls,xlsx,jpg,jpeg,png
MAX_FILE_SIZE=10485760

# =============================================================================
# FRONTEND
# =============================================================================
NEXT_PUBLIC_API_URL=

# =============================================================================
# ЛОГИРОВАНИЕ
# =============================================================================
LOG_LEVEL=INFO
EOF

echo "✅ Файл .env создан успешно!"
echo "📋 Содержимое:"
cat .env
