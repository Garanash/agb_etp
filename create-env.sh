#!/bin/bash

# Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ .env Ñ„Ð°Ð¹Ð»Ð° Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ
echo "ðŸ”§ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ .env Ñ„Ð°Ð¹Ð»Ð° Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ð°..."

# ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ IP Ð°Ð´Ñ€ÐµÑ ÑÐµÑ€Ð²ÐµÑ€Ð°
SERVER_IP=$(hostname -I | awk '{print $1}')

cat > .env << EOF
# ðŸ¢ ÐÐ»Ð¼Ð°Ð·Ð³ÐµÐ¾Ð±ÑƒÑ€ Ð­Ð¢ÐŸ - Production Environment Variables

# =============================================================================
# Ð‘ÐÐ—Ð Ð”ÐÐÐÐ«Ð¥
# =============================================================================
POSTGRES_USER=agb_etp
POSTGRES_PASSWORD=agb_secure_password_2024
POSTGRES_DB=agb_etp
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgresql://agb_etp:agb_secure_password_2024@postgres:5432/agb_etp

# =============================================================================
# Ð‘Ð•Ð—ÐžÐŸÐÐ¡ÐÐžÐ¡Ð¢Ð¬
# =============================================================================
SECRET_KEY=agb_very_secure_secret_key_2024_change_in_production
DEBUG=False

# =============================================================================
# CORS
# =============================================================================
CORS_ORIGINS=["http://localhost", "http://$SERVER_IP", "https://$SERVER_IP"]

# =============================================================================
# Ð¤ÐÐ™Ð›Ð«
# =============================================================================
ALLOWED_FILE_TYPES=pdf,doc,docx,xls,xlsx,jpg,jpeg,png
MAX_FILE_SIZE=10485760

# =============================================================================
# FRONTEND
# =============================================================================
NEXT_PUBLIC_API_URL=

# =============================================================================
# Ð›ÐžÐ“Ð˜Ð ÐžÐ’ÐÐÐ˜Ð•
# =============================================================================
LOG_LEVEL=INFO
EOF

echo "âœ… Ð¤Ð°Ð¹Ð» .env ÑÐ¾Ð·Ð´Ð°Ð½ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾!"
echo "ðŸ“‹ Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ:"
cat .env
